# 2026-01-31 (Asia/Saigon)

## Trading bot decisions / rules (from chat)
- Risk rule clarified: 1% is % of **account balance** lost if SL hits (fees ignored). Size is computed from stop distance.
- Close-on-bad-force (TF-specific): evaluate on the same TF as entry. Bad force when trend flips opposite; RSI 40–60 is **warning only** (1b), not auto-close.
- SL method: **ZONE** (A) and prefer 1H but allow fallback to 15m when 1H too far (2b).
- Cron requested: 15m after-close checks at UTC minute 01/16/31/46; LLM-in-the-loop; log OPEN/CLOSE to CSV; Telegram alerts.

## Issues discovered (cron vs training)
- Cron initially:
  - used pivot+fixed buffer SL (not S/R zone) and could misrepresent "SL 1%".
  - closed a SHORT just because RSI entered 40–60, contradicting later clarified rule (1b).
  - sent English messages; required Vietnamese.
  - could open too frequently because decision logic was too rule-based without R:R/TP context.

## Fixes applied
- Added MEMORY.md + daily memory file for cron context.
- Switched to LLM-in-the-loop prompt, full VN output.
- Updated close logic to treat RSI 40–60 as warning; close only on reversal confirmation.
- Updated context generator to include S/R zone candidates (1H/15m/4H) and TP reference candidates for R:R evaluation.

## Files created/updated
- trading/decisions.csv: logged plan review example (assumed fill) + close rule.
- trading/trades_15m.csv + trading/state_15m.json (strategy signals state).
- trading/cron_15m_context.py, trading/apply_15m_decision.py
- Cron job: btc_15m_after_close_utc updated to load rules + memory + state and decide via LLM.
